<!-- build time:Fri Aug 23 2019 11:46:46 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta name="generator" content="Hexo 3.9.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0"><link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222"><link rel="stylesheet" href="/css/main.css?v=7.3.0"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.3.0",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},save_scroll:!1,copycode:{enable:!0,show_result:"mac",style:null},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!1,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},jsonsearch:{enable:!0},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},translation:{copy_button:"Copy",copy_success:"Copied",copy_failure:"Copy failed"}}</script><meta name="description" content="服务器端渲染(Server-Side Rendering)：Vue.js是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出Vue组件，进行生成DOM和操作DOM。然而，也可以将同一个组件渲染为服务器端的HTML字符串，将它们直接发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序。服务器渲染的Vue.js应用程序也可以被认为是”同构”或”通用”，因为应用程序的大部分代码都可以在"><meta name="keywords" content="Nuxt"><meta property="og:type" content="article"><meta property="og:title" content="Vue SSR Nuxt"><meta property="og:url" content="http://luuman.github.io/2018/08/25/Nuxt/index.html"><meta property="og:site_name" content="Luuman&#39;s Blog"><meta property="og:description" content="服务器端渲染(Server-Side Rendering)：Vue.js是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出Vue组件，进行生成DOM和操作DOM。然而，也可以将同一个组件渲染为服务器端的HTML字符串，将它们直接发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序。服务器渲染的Vue.js应用程序也可以被认为是”同构”或”通用”，因为应用程序的大部分代码都可以在"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/5/24/16390509c83aef03?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><meta property="og:image" content="http://luuman.github.io/2018/08/25/Nuxt/%22https://upload-images.jianshu.io/upload_images/5531211-d1a3e5b36ee03f08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/460/format/webp%22"><meta property="og:updated_time" content="2019-08-19T07:19:30.150Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Vue SSR Nuxt"><meta name="twitter:description" content="服务器端渲染(Server-Side Rendering)：Vue.js是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出Vue组件，进行生成DOM和操作DOM。然而，也可以将同一个组件渲染为服务器端的HTML字符串，将它们直接发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序。服务器渲染的Vue.js应用程序也可以被认为是”同构”或”通用”，因为应用程序的大部分代码都可以在"><meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2018/5/24/16390509c83aef03?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><link rel="canonical" href="http://luuman.github.io/2018/08/25/Nuxt/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,isPage:!1,isArchive:!1}</script><title>Vue SSR Nuxt | Luuman's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Luuman's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">因为有了危机感，所以会义无反顾。</p></div><div class="site-nav-toggle"><button aria-label="Toggle navigation bar"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul></nav><div class="site-search"></div></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content page-post-detail"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://luuman.github.io/2018/08/25/Nuxt/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Luuman"><meta itemprop="description" content="luuman，90后，水瓶座普通男青年！爱折腾，爱运动，更爱游离于错综复杂的编码与逻辑中，无法自拔。相信编程是一门艺术，自诩为游弋在代码里的人生。"><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Luuman's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Vue SSR Nuxt</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2018-08-25 18:29:00" itemprop="dateCreated datePublished" datetime="2018-08-25T18:29:00+08:00">2018-08-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2019-08-19 15:19:30" itemprop="dateModified" datetime="2019-08-19T15:19:30+08:00">2019-08-19</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/FrontFrame/" itemprop="url" rel="index"><span itemprop="name">FrontFrame</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p><strong>服务器端渲染(Server-Side Rendering)：</strong>Vue.js是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出Vue组件，进行生成DOM和操作DOM。然而，也可以将同一个组件渲染为服务器端的HTML字符串，将它们直接发送到浏览器，最后将静态标记”混合”为客户端上完全交互的应用程序。<br>服务器渲染的Vue.js应用程序也可以被认为是”同构”或”通用”，因为应用程序的大部分代码都可以在服务器和客户端上运行。</p><a id="more"></a><h1 id="传统打包"><a href="#传统打包" class="headerlink" title="传统打包"></a>传统打包</h1><p><code>Vue项目</code>打包后，组件都是JS在<code>html</code>文件返回后再渲染到<code>&lt;div id=app&gt;&lt;/div&gt;</code>里的。这就合理的解释了<code>SEO</code>缺陷的原因。</p><h1 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h1><h2 id="新手模板"><a href="#新手模板" class="headerlink" title="新手模板"></a>新手模板</h2><blockquote><p>初始化项目</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vue init nuxt-community/starter-template &lt;project-name&gt;</span><br></pre></td></tr></table></figure><p>注：如果vue-cli没有安装, 需先通过<code>npm install -g vue-cli</code>来安装。</p><blockquote><p>安装依赖包</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd &lt;project-name&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><blockquote><p>启动项目</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li>应用现在运行在 <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a></li><li>Nuxt.js 会监听 pages 目录中的文件变更并自动重启， 当添加新页面时没有必要手工重启应用。</li><li>运行端口占用，如何切换端口</li></ol><h2 id="模板结构"><a href="#模板结构" class="headerlink" title="模板结构"></a>模板结构</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── .nuxt/               # 自动生成的配置文件（无需配置）</span><br><span class="line">	├── components/          # css 文件夹</span><br><span class="line">	├── views/            	 # img 文件夹</span><br><span class="line">	├── App.js             	 # css 文件夹</span><br><span class="line">	├── client.js            # css 文件夹</span><br><span class="line">	├── empty.js             # css 文件夹</span><br><span class="line">	├── index.js             # css 文件夹</span><br><span class="line">	├── loading.html         # css 文件夹</span><br><span class="line">	├── middleware.js        # css 文件夹</span><br><span class="line">	├── router.js            # css 文件夹</span><br><span class="line">	├── server.js            # css 文件夹</span><br><span class="line">	└── utils.js             # css 文件夹</span><br><span class="line">├── api/                 # 资源目录 assets 用于组织未编译的静态资源如 LESS、SASS</span><br><span class="line">	├── index.js         		 # API接口配置项</span><br><span class="line">	├── env.js            	 # 开发配置项</span><br><span class="line">	└── http.js            	 # Axios</span><br><span class="line">├── assets/              # 资源目录 assets 用于组织未编译的静态资源如 LESS、SASS</span><br><span class="line">	├── css/            		 # css 文件夹</span><br><span class="line">	├── img/            		 # img 文件夹</span><br><span class="line">	├── less/            		 # less 文件夹</span><br><span class="line">	└── scss/            		 # scss 文件夹</span><br><span class="line">├── components/          # 组件目录：Vue.js 组件。Nuxt.js 不会扩展增强该目录下 Vue.js 组件，即这些组件不会像页面组件那样有 asyncData 方法的特性。</span><br><span class="line">├── layouts/             # 布局目录：应用的布局组件</span><br><span class="line">├── middleware/          # 中间件：存放应用的中间件</span><br><span class="line">├── pages/               # 页面目录：用于组织应用的路由及视图</span><br><span class="line">├── plugins/             # 插件目录：用于组织那些需要在 根vue.js应用 实例化之前需要运行的 Javascript 插件</span><br><span class="line">├── static/              # 静态文件目录：用于存放应用的静态文件</span><br><span class="line">├── store/               # Vuex状态树</span><br><span class="line">├── .eslintignore        # ESLint 检查中需忽略的文件（夹）</span><br><span class="line">├── .eslintrc            # ESLint 配置</span><br><span class="line">├── .gitignore           # 需被 Git 忽略的文件（夹）</span><br><span class="line">├── nuxt.config.js       # 应用的个性化配置，以便覆盖默认配置</span><br><span class="line">├── README.md            # README 简介</span><br><span class="line">└── package.json         # 应用的依赖关系、对外暴露的脚本接口</span><br></pre></td></tr></table></figure><h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><p><img src="https://user-gold-cdn.xitu.io/2018/5/24/16390509c83aef03?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="工作原理"></p><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><h2 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h2><table><thead><tr><th>绝对路径</th><th>路径</th></tr></thead><tbody><tr><td>~</td><td>/</td></tr><tr><td>~api</td><td>/api</td></tr><tr><td>~assets</td><td>/assets</td></tr><tr><td>~components</td><td>/components</td></tr><tr><td>~layouts</td><td>/layouts</td></tr><tr><td>~middleware</td><td>/middleware</td></tr><tr><td>~pages</td><td>/pages</td></tr><tr><td>~plugins</td><td>/plugins</td></tr><tr><td>~static</td><td>/static</td></tr><tr><td>~store</td><td>/store</td></tr></tbody></table><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>Nuxt.js 根据 pages 目录结构去生成 vue-router 配置，也就是说 pages 目录的结构直接影响路由结构</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">|-- pages</span><br><span class="line">    |-- posts</span><br><span class="line">        |-- index.vue</span><br><span class="line">        |-- welcome.vue</span><br><span class="line">    |-- about.vue</span><br><span class="line">    |-- index.vue</span><br><span class="line"></span><br><span class="line">=&gt; 生成</span><br><span class="line"></span><br><span class="line">routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/posts'</span>,</span><br><span class="line">    component: <span class="string">'~pages/posts/index.vue'</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/posts/welcome'</span>,</span><br><span class="line">    component: <span class="string">'~pages/posts/welcome.vue'</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/about'</span>,</span><br><span class="line">    component: <span class="string">'~pages/about.vue'</span></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: <span class="string">'~pages/index.vue'</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">pages/</span><br><span class="line">--| _slug/</span><br><span class="line">-----| comments.vue</span><br><span class="line">-----| index.vue</span><br><span class="line">--| users/</span><br><span class="line">-----| _id.vue</span><br><span class="line">--| index.vue</span><br><span class="line"></span><br><span class="line">=&gt; 生成</span><br><span class="line">router: &#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'index'</span>,</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      component: <span class="string">'pages/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'users-id'</span>,</span><br><span class="line">      path: <span class="string">'/users/:id?'</span>,</span><br><span class="line">      component: <span class="string">'pages/users/_id.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'slug'</span>,</span><br><span class="line">      path: <span class="string">'/:slug'</span>,</span><br><span class="line">      component: <span class="string">'pages/_slug/index.vue'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'slug-comments'</span>,</span><br><span class="line">      path: <span class="string">'/:slug/comments'</span>,</span><br><span class="line">      component: <span class="string">'pages/_slug/comments.vue'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="错误页面"><a href="#错误页面" class="headerlink" title="错误页面"></a>错误页面</h2><p>默认访问：layouts/error.vue<br>error =&gt; ~/layouts/error.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"container"</span>&gt;</span><br><span class="line">    &lt;h1 v-<span class="keyword">if</span>=<span class="string">"error.statusCode === 404"</span>&gt;页面不存在&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;h1 v-else&gt;应用发生错误异常&lt;/</span>h1&gt;</span><br><span class="line">    &lt;nuxt-link to=<span class="string">"/"</span>&gt;首 页&lt;<span class="regexp">/nuxt-link&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  props: ['error'],</span></span><br><span class="line"><span class="regexp">  layout: 'blog' /</span><span class="regexp">/ 你可以为错误页面指定自定义的布局</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>statusCode</th><th>Name</th></tr></thead><tbody><tr><td>404</td><td>页面不存在</td></tr><tr><td></td><td></td></tr></tbody></table><h2 id="引入静态资源"><a href="#引入静态资源" class="headerlink" title="引入静态资源"></a>引入静态资源</h2><p>以flexible为例</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">script: [</span><br><span class="line">  &#123;</span><br><span class="line">    type: <span class="string">'text/javascript'</span>,</span><br><span class="line">    src: <span class="string">'/flexible.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    type: <span class="string">'text/javascript'</span>,</span><br><span class="line">    innerHTML: <span class="string">'console.log(1)'</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="页面方法"><a href="#页面方法" class="headerlink" title="页面方法"></a>页面方法</h1><h2 id="asyncData-异步获取数据"><a href="#asyncData-异步获取数据" class="headerlink" title="asyncData 异步获取数据"></a>asyncData 异步获取数据</h2><p>Nuxt.js 扩展了 Vue.js，增加了一个叫 asyncData 的方法，使得我们可以在设置组件的数据之前能异步获取或处理数据。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	data () &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">'default'</span> &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	asyncData (context) &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123; <span class="attr">project</span>: <span class="string">'nuxt'</span> &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="返回-Promise"><a href="#返回-Promise" class="headerlink" title="返回 Promise"></a>返回 Promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  asyncData (&#123; params &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> axios.get(<span class="string">`https://my-api/posts/<span class="subst">$&#123;params.id&#125;</span>`</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">title</span>: res.data.title &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-async或await"><a href="#使用-async或await" class="headerlink" title="使用 async或await"></a>使用 async或await</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> asyncData (&#123; params &#125;) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> axios.get(<span class="string">`https://my-api/posts/<span class="subst">$&#123;params.id&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">title</span>: data.title &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>asyncData方法：会在组件<code>（限于页面组件）</code>每次加载之前被调用。它可以在服务端或路由更新之前被调用。在这个方法被调用的时候，第一个参数被设定为当前页面的上下文对象，你可以利用 asyncData方法来获取数据并返回给当前组件。</p><table><thead><tr><th>属性字段</th><th>类型</th><th>可用</th><th>描述</th></tr></thead><tbody><tr><td>isClient</td><td>Boolean</td><td>客户端 &amp; 服务端</td><td>是否来自客户端渲染</td></tr><tr><td>isServer</td><td>Boolean</td><td>客户端 &amp; 服务端</td><td>是否来自服务端渲染</td></tr><tr><td>isDev</td><td>Boolean</td><td>客户端 &amp; 服务端</td><td>是否是开发(dev) 模式，在生产环境的数据缓存中用到</td></tr><tr><td>route</td><td>vue-router 路由</td><td>客户端 &amp; 服务端</td><td>vue-router 路由实例。</td></tr><tr><td>store</td><td>vuex 数据流</td><td>客户端 &amp; 服务端</td><td>Vuex.Store 实例。只有vuex 数据流存在相关配置时可用。</td></tr><tr><td>env</td><td>Object</td><td>客户端 &amp; 服务端</td><td>nuxt.config.js 中配置的环境变量, 见 环境变量 api</td></tr><tr><td>params</td><td>Object</td><td>客户端 &amp; 服务端</td><td>route.params 的别名</td></tr><tr><td>query</td><td>Object</td><td>客户端 &amp; 服务端</td><td>route.query 的别名</td></tr><tr><td>req</td><td>http.Request</td><td>服务端</td><td>Node.js API 的 Request 对象。如果 nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。nuxt generate 不可用。</td></tr><tr><td>res</td><td>http.Response</td><td>服务端</td><td>Node.js API 的 Response 对象。如果 nuxt 以中间件形式使用的话，这个对象就根据你所使用的框架而定。nuxt generate 不可用。</td></tr><tr><td>redirect</td><td>Function</td><td>客户端 &amp; 服务端</td><td>用这个方法重定向用户请求到另一个路由。状态码在服务端被使用，默认 302。redirect([status,] path [, query])</td></tr><tr><td>error</td><td>Function</td><td>客户端 &amp; 服务端</td><td>用这个方法展示错误页：error(params)。params 参数应该包含 statusCode 和 message 字段。</td></tr></tbody></table><h3 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h3><blockquote><p>error</p></blockquote><p>Nuxt.js 在上下文对象context中提供了一个 error(params) 方法，你可以通过调用该方法来显示错误信息页面。params.statusCode 可用于指定服务端返回的请求状态码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	asyncData (&#123; params, error &#125;) &#123;</span><br><span class="line">		<span class="keyword">return</span> axios.get(<span class="string">`https://my-api/posts/<span class="subst">$&#123;params.id&#125;</span>`</span>)</span><br><span class="line">		.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> &#123; <span class="attr">title</span>: res.data.title &#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		.catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">			error(&#123; <span class="attr">statusCode</span>: <span class="number">404</span>, <span class="attr">message</span>: <span class="string">'Post not found'</span> &#125;)</span><br><span class="line">			<span class="comment">// 执行后直接跳转error页面</span></span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>callback</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  asyncData (&#123; params &#125;, callback) &#123;</span><br><span class="line">    axios.get(<span class="string">`https://my-api/posts/<span class="subst">$&#123;params.id&#125;</span>`</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      callback(<span class="literal">null</span>, &#123; <span class="attr">title</span>: res.data.title &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      callback(&#123; <span class="attr">statusCode</span>: <span class="number">404</span>, <span class="attr">message</span>: <span class="string">'Post not found'</span> &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><p>fetch 方法用于在渲染页面前填充应用的状态树（store）数据， 与 asyncData 方法类似，不同的是它不会设置组件的数据。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch (&#123; store, params &#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(<span class="string">'http://my-api/stars'</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    store.commit(<span class="string">'setStars'</span>, res.data)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>你也可以使用 async 或 await 的模式简化代码如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> fetch (&#123; store, params &#125;) &#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; data &#125; = <span class="keyword">await</span> axios.get(<span class="string">'http://my-api/stars'</span>)</span><br><span class="line">  store.commit(<span class="string">'setStars'</span>, data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p>Nuxt.js 使用了 vue-meta 更新应用的 头部标签(Head) 和 html 属性。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">head () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    title: <span class="string">'title'</span>, <span class="comment">// 标题</span></span><br><span class="line">    meta: [</span><br><span class="line">      &#123;</span><br><span class="line">        hid: <span class="string">'Keywords'</span>, <span class="comment">// 唯一标识</span></span><br><span class="line">        name: <span class="string">'Keywords1'</span>, <span class="comment">// 名称</span></span><br><span class="line">        content: <span class="string">'Keywords2'</span> <span class="comment">// 内容</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    link: [</span><br><span class="line">      &#123;</span><br><span class="line">	      rel: <span class="string">'icon'</span>,</span><br><span class="line">	      type: <span class="string">'image/x-icon'</span>,</span><br><span class="line">	      href: <span class="string">'/favicon.ico'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>注意：为了避免子组件中的meta标签不能正确覆盖父组件中相同的标签而产生重复的现象，建议利用 hid 键为meta标签配一个唯一的标识编号。</p><h2 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h2><p>根目录下的所有文件都属于个性化布局文件，可以在页面组件中利用 layout 属性来引用。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  layout: <span class="string">'blog'</span>,</span><br><span class="line">  <span class="comment">// 或</span></span><br><span class="line">  layout (context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'blog'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="middleware"><a href="#middleware" class="headerlink" title="middleware"></a>middleware</h2><p>在应用中的特定页面设置中间件，在服务器中返回。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	middleware: <span class="string">'stats'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context.userAgent = context.isServer ? context.req.headers[<span class="string">'user-agent'</span>] : navigator.userAgent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="scrollToTop"><a href="#scrollToTop" class="headerlink" title="scrollToTop"></a>scrollToTop</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;子页面组件&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  scrollToTop: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 可以是字符</span></span><br><span class="line">  transition: <span class="string">''</span></span><br><span class="line">  <span class="comment">// 或对象</span></span><br><span class="line">  transition: &#123;&#125;</span><br><span class="line">  <span class="comment">// 或函数</span></span><br><span class="line">  transition (to, <span class="keyword">from</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="validate"><a href="#validate" class="headerlink" title="validate"></a>validate</h2><p>Nuxt.js 可以让你在动态路由对应的页面组件中配置一个校验方法用于校验动态路由参数的有效性。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">validate(&#123; params, query &#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// 如果参数有效</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 参数无效，Nuxt.js 停止渲染当前页面并显示错误页面</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><p>目录下的 nuxt.config.js 是我们唯一的配置入口，默认的给力我们三个配置 ·head·css·loading· 分别是头部设置，全局css，loading进度条</p><table><thead><tr><th>属性</th><th>名称</th></tr></thead><tbody><tr><td>build</td><td>模块管理</td></tr><tr><td>cache</td><td>组件缓存</td></tr><tr><td>css</td><td>全局样式</td></tr><tr><td>dev</td><td>开发配置</td></tr><tr><td>env</td><td>环境配置</td></tr><tr><td>generate</td><td>静态配置</td></tr><tr><td>head</td><td>全局头部配置</td></tr><tr><td>loading</td><td>加载配置</td></tr><tr><td>plugins</td><td>插件配置</td></tr><tr><td>rootDir</td><td>配置</td></tr><tr><td>router</td><td>路由配置</td></tr><tr><td>srcDir</td><td>配置</td></tr><tr><td>transition</td><td>动画配置</td></tr></tbody></table><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><p>Nuxt.js 允许你在自动生成的 vendor.bundle.j 文件中添加一些模块，以减少应用 bundle的体积。如果你的应用依赖第三方模块，这个配置项是十分实用的。</p><h3 id="analyze"><a href="#analyze" class="headerlink" title="analyze"></a>analyze</h3><p>Nuxt.js 使用 webpack-bundle-analyzer 分析并可视化构建后的打包文件，你可以基于分析结果来决定如何优化它。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">默认值： <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		analyze: <span class="literal">true</span></span><br><span class="line">		<span class="comment">// or</span></span><br><span class="line">		analyze: &#123;</span><br><span class="line">			analyzerMode: <span class="string">'static'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>提示： 可通过 nuxt build –analyze 或 nuxt build -a 命令来启用该分析器进行编译构建，分析结果可在 <a href="http://localhost:8888" target="_blank" rel="noopener">http://localhost:8888</a> 上查看。</p><h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><p>为 JS 和 Vue 文件设定自定义的 babel 配置。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">默认值：</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	presets: [<span class="string">'vue-app'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		babel: &#123;</span><br><span class="line">			presets: [<span class="string">'es2015'</span>, <span class="string">'stage-0'</span>]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h3><p>为客户端和服务端的构建配置进行手工的扩展处理。</p><p>该扩展方法会被调用两次，一次在服务端打包构建的时候，另外一次是在客户端打包构建的时候。该方法的参数如下：</p><p>Webpack 配置对象<br>构建环境对象，包括这些属性（全部为布尔类型）： isDev， isClient， isServer</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		extend (config, &#123; isClient &#125;) &#123;</span><br><span class="line">			<span class="comment">// 为 客户端打包 进行扩展配置</span></span><br><span class="line">			<span class="keyword">if</span> (isClient) &#123;</span><br><span class="line">				config.devtool = <span class="string">'eval-source-map'</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你想了解更多关于webpack的配置，可以移步 Nuxt.js 源码的 webpack 目录。</p><h3 id="filenames-自定义打包文件名"><a href="#filenames-自定义打包文件名" class="headerlink" title="filenames 自定义打包文件名"></a>filenames 自定义打包文件名</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">默认值：</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  build: &#123;</span><br><span class="line">    filenames: &#123;</span><br><span class="line">      vendor: <span class="string">'vendor.[hash].js'</span>,</span><br><span class="line">      app: <span class="string">'app.[chunkhash].js'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="loaders-加载器"><a href="#loaders-加载器" class="headerlink" title="loaders 加载器"></a>loaders 加载器</h3><p>自定义 webpack 加载器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">默认值：</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">		loader: <span class="string">'url-loader'</span>,</span><br><span class="line">		query: &#123;</span><br><span class="line">			limit: <span class="number">1000</span>, <span class="comment">// 1KO</span></span><br><span class="line">			name: <span class="string">'img/[name].[hash:7].[ext]'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	&#123;</span><br><span class="line">		test: <span class="regexp">/\.(woff2?|eot|ttf|otf)(\?.*)?$/</span>,</span><br><span class="line">		loader: <span class="string">'url-loader'</span>,</span><br><span class="line">		query: &#123;</span><br><span class="line">			limit: <span class="number">1000</span>, <span class="comment">// 1 KO</span></span><br><span class="line">			name: <span class="string">'fonts/[name].[hash:7].[ext]'</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		loaders: [</span><br><span class="line">			&#123;</span><br><span class="line">				test: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">				loader: <span class="string">'url-loader'</span>,</span><br><span class="line">				query: &#123;</span><br><span class="line">					limit: <span class="number">10000</span>, <span class="comment">// 10KO</span></span><br><span class="line">					name: <span class="string">'img/[name].[hash].[ext]'</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当 nuxt.config.js 里有自定义的 loaders 配置时，将会覆盖默认的配置。</p><h3 id="plugins-插件"><a href="#plugins-插件" class="headerlink" title="plugins 插件"></a>plugins 插件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		plugins: [</span><br><span class="line">			<span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">				<span class="string">'process.VERSION'</span>: <span class="built_in">require</span>(<span class="string">'./package.json'</span>).version</span><br><span class="line">			&#125;)</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="postcss"><a href="#postcss" class="headerlink" title="postcss"></a>postcss</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">默认值：</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">	<span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">		browsers: [<span class="string">'last 3 versions'</span>]</span><br><span class="line">	&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		postcss: [</span><br><span class="line">			<span class="built_in">require</span>(<span class="string">'postcss-nested'</span>)(),</span><br><span class="line">			<span class="built_in">require</span>(<span class="string">'postcss-responsive-type'</span>)(),</span><br><span class="line">			<span class="built_in">require</span>(<span class="string">'postcss-hexrgba'</span>)(),</span><br><span class="line">			<span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">				browsers: [<span class="string">'last 3 versions'</span>]</span><br><span class="line">			&#125;)</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="publicPath-CDN地址"><a href="#publicPath-CDN地址" class="headerlink" title="publicPath CDN地址"></a>publicPath CDN地址</h3><p>Nuxt.js 允许你将待发布的文件直接上传至 CDN 以获得最佳访问性能，只需设置 publicPath 为你的 CDN 地址即可。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">默认值: <span class="string">'/_nuxt/'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		publicPath: <span class="string">'https://cdn.nuxtjs.org'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过以上配置，当运行 nuxt build 时，再将.nuxt/dist/目录的内容上传到您的CDN，然后瞧！</p><h3 id="vendor-第三方模块"><a href="#vendor-第三方模块" class="headerlink" title="vendor 第三方模块"></a>vendor 第三方模块</h3><p>Nuxt.js 允许你在自动生成的 vendor.bundle.js 文件中添加一些模块，以减少应用 bundle 的体积。这里说的是一些你所依赖的第三方模块 (比如 axios)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		vendor: [<span class="string">'axios'</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	build: &#123;</span><br><span class="line">		vendor: [</span><br><span class="line">			<span class="string">'axios'</span>,</span><br><span class="line">			<span class="string">'~plugins/my-lib.js'</span></span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="cache-组件缓存"><a href="#cache-组件缓存" class="headerlink" title="cache 组件缓存"></a>cache 组件缓存</h2><p>该配置项让你开启组件缓存策略以提升渲染性能。<br>如 cache 设定的值为 true，那么相当于应用了下面的默认配置：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  cache: <span class="literal">true</span></span><br><span class="line">  <span class="comment">// or</span></span><br><span class="line">  cache: &#123;</span><br><span class="line">    max: <span class="number">1000</span>,</span><br><span class="line">    maxAge: <span class="number">900000</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性名</th><th>是否可选?</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>max</td><td>是</td><td>整型</td><td>1000</td><td>缓存组件的最大数目，当第 1001 个组件被添加至缓存中时， 第一个被缓存的组件会从缓存中移除。</td></tr><tr><td>maxAge</td><td>是</td><td>整型</td><td>900000</td><td>缓存时间，单位毫秒, 默认是 15 分钟。</td></tr></tbody></table><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><p>该配置项用于定义应用的全局（所有页面均需引用的）样式文件、模块或第三方库。</p><ol><li>src: String (文件路径)</li><li>lang: String (所需的预处理器)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	css: [</span><br><span class="line">		<span class="comment">// 加载一个 node.js 模块</span></span><br><span class="line">		<span class="string">'hover.css/css/hover-min.css'</span>,</span><br><span class="line">		<span class="comment">// 同样加载一个 node.js 模块，不过我们定义所需的预处理器</span></span><br><span class="line">		&#123; <span class="attr">src</span>: <span class="string">'bulma'</span>, <span class="attr">lang</span>: <span class="string">'sass'</span> &#125;,</span><br><span class="line">		<span class="comment">// 项目中的 CSS 文件</span></span><br><span class="line">		<span class="string">'~assets/css/main.css'</span>,</span><br><span class="line">		<span class="comment">// 项目中的 Sass 文件</span></span><br><span class="line">		&#123; <span class="attr">src</span>: <span class="string">'~assets/css/main.scss'</span>, <span class="attr">lang</span>: <span class="string">'scss'</span> &#125; <span class="comment">// 指定 scss 而非 sass</span></span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dev"><a href="#dev" class="headerlink" title="dev"></a>dev</h2><p>dev 属性的值会被 nuxt 命令 覆盖</p><ol><li>当使用 nuxt 命令时，dev 会被强制设置成 true</li><li>当使用 nuxt build， nuxt start 或 nuxt generate 命令时，dev 会被强制设置成 false</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  dev: (process.env.NODE_ENV !== <span class="string">'production'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">=&gt; server.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;Nuxt, Builder&#125; = <span class="built_in">require</span>(<span class="string">'nuxt'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="built_in">require</span>(<span class="string">'express'</span>)()</span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入配置初始化 Nuxt.js 实例</span></span><br><span class="line"><span class="keyword">let</span> config = <span class="built_in">require</span>(<span class="string">'./nuxt.config.js'</span>)</span><br><span class="line"><span class="keyword">const</span> nuxt = <span class="keyword">new</span> Nuxt(config)</span><br><span class="line">app.use(nuxt.render)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在开发模式下进行编译</span></span><br><span class="line"><span class="keyword">if</span> (config.dev) &#123;</span><br><span class="line">  <span class="keyword">new</span> Builder(nuxt).build()</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error)</span><br><span class="line">    process.exit(<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听指定端口</span></span><br><span class="line">app.listen(port, <span class="string">'0.0.0.0'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'服务器运行于 localhost:'</span> + port)</span><br></pre></td></tr></table></figure><h2 id="env"><a href="#env" class="headerlink" title="env"></a>env</h2><p>Nuxt.js 让你可以配置在客户端和服务端共享的环境变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  env: &#123;</span><br><span class="line">    baseUrl: process.env.BASE_URL || <span class="string">'http://localhost:3000'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以通过以下两种方式来使用 baseUrl 变量：</p><ol><li>通过 process.env.baseUrl</li><li>通过 context.baseUrl，请参考 context api</li></ol><p>举个例子， 我们可以利用它来配置 axios 的自定义实例。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins/axios.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios.create(&#123;</span><br><span class="line">  baseURL: process.env.baseUrl</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><p>配置 Nuxt.js 应用生成静态站点的具体方式。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">该配置项用于定义每个动态路由的参数，Nuxt.js 依据这些路由配置生成对应目录结构的静态文件。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">关于 generate 配置项的详细文档</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## head</span></span><br><span class="line"><span class="string">借助 head 属性，Nuxt.js 让你可以在 nuxt.config.js 中配置应用的 meta 信息。</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> javascript</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  head: &#123;</span><br><span class="line">    titleTemplate: <span class="string">'%s - Nuxt.js'</span>,</span><br><span class="line">    meta: [</span><br><span class="line">      &#123; <span class="attr">charset</span>: <span class="string">'utf-8'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'viewport'</span>, <span class="attr">content</span>: <span class="string">'width=device-width, initial-scale=1'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">hid</span>: <span class="string">'description'</span>, <span class="attr">name</span>: <span class="string">'description'</span>, <span class="attr">content</span>: <span class="string">'Meta description'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/declandewet/vue-meta#recognized-metainfo-properties" target="_blank" rel="noopener">关于 head 配置项的详细文档</a></p><h2 id="loading"><a href="#loading" class="headerlink" title="loading"></a>loading</h2><p>在页面切换的时候，Nuxt.js 使用内置的加载组件显示加载进度条。你可以定制它的样式，禁用或者创建自己的加载组件。</p><h3 id="禁用加载进度条"><a href="#禁用加载进度条" class="headerlink" title="禁用加载进度条"></a>禁用加载进度条</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	loading: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="个性化加载进度条"><a href="#个性化加载进度条" class="headerlink" title="个性化加载进度条"></a>个性化加载进度条</h3><table><thead><tr><th>键</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>color</td><td>String</td><td>‘black’</td><td>进度条的颜色</td></tr><tr><td>failedColor</td><td>String</td><td>‘red’</td><td>页面加载失败时的颜色 （当 data 或 fetch 方法返回错误时）。</td></tr><tr><td>height</td><td>String</td><td>‘2px’</td><td>进度条的高度 (在进度条元素的 style 属性上体现)。</td></tr><tr><td>duration</td><td>Number</td><td>5000</td><td>进度条的最大显示时长，单位毫秒。Nuxt.js 假设页面在该时长内加载完毕。</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  loading: &#123;</span><br><span class="line">    color: <span class="string">'blue'</span>,</span><br><span class="line">    height: <span class="string">'5px'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义加载组件"><a href="#自定义加载组件" class="headerlink" title="自定义加载组件"></a>自定义加载组件</h3><table><thead><tr><th>方法</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>start()</td><td>是</td><td>路由更新（即浏览器地址变化）时调用, 请在该方法内显示组件。</td></tr><tr><td>finish()</td><td>是</td><td>路由更新完毕（即asyncData方法调用完成且页面加载完）时调用，请在该方法内隐藏组件。</td></tr><tr><td>fail()</td><td>否</td><td>路由更新失败时调用（如asyncData方法返回异常）。</td></tr><tr><td>increase(num)</td><td>否</td><td>页面加载过程中调用, num 是小于 100 的整数。</td></tr></tbody></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	loading: <span class="string">'~components/loading.vue'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">components/loading.vue</span><br><span class="line"></span><br><span class="line">&lt;template lang=<span class="string">"html"</span>&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"loading-page"</span> v-<span class="keyword">if</span>=<span class="string">"loading"</span>&gt;</span><br><span class="line">    &lt;p&gt;Loading...&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  data: () =&gt; (&#123;</span></span><br><span class="line"><span class="regexp">    loading: false</span></span><br><span class="line"><span class="regexp">  &#125;),</span></span><br><span class="line"><span class="regexp">  methods: &#123;</span></span><br><span class="line"><span class="regexp">    start () &#123;</span></span><br><span class="line"><span class="regexp">      this.loading = true</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    finish () &#123;</span></span><br><span class="line"><span class="regexp">      this.loading = false</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">.loading-page &#123;</span></span><br><span class="line"><span class="regexp">  position: fixed;</span></span><br><span class="line"><span class="regexp">  top: 0;</span></span><br><span class="line"><span class="regexp">  left: 0;</span></span><br><span class="line"><span class="regexp">  width: 100%;</span></span><br><span class="line"><span class="regexp">  height: 100%;</span></span><br><span class="line"><span class="regexp">  background: rgba(255, 255, 255, 0.8);</span></span><br><span class="line"><span class="regexp">  text-align: center;</span></span><br><span class="line"><span class="regexp">  padding-top: 200px;</span></span><br><span class="line"><span class="regexp">  font-size: 30px;</span></span><br><span class="line"><span class="regexp">  font-family: sans-serif;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure><h2 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h2><p>该配置项用于配置那些需要在 根vue.js应用 实例化之前需要运行的 Javascript 插件。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">	&#123;<span class="attr">src</span>: <span class="string">'~plugins/extra.js'</span>, <span class="attr">ssr</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">	&#123;<span class="attr">src</span>: <span class="string">'~plugins/share.js'</span>, <span class="attr">ssr</span>: <span class="literal">true</span>&#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure><ol><li>src: String (文件的路径)</li><li>ssr: Boolean (默认为 true) 如果值为 false，该文件只会在客户端被打包引入。有些插件可能只是在浏览器里使用，所以你可以用 ssr: false 变量来配置插件只从客户端还是服务端运行。</li><li>常见的问题：window对象没有，无法使用。请将插件放入SSR：false的页面。</li></ol><h2 id="rootDir"><a href="#rootDir" class="headerlink" title="rootDir"></a>rootDir</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">该配置项用于配置 Nuxt.js 应用的根目录。</span><br></pre></td></tr></table></figure><p>关于 rootDir 配置项的详细文档</p><h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><h3 id="base"><a href="#base" class="headerlink" title="base"></a>base</h3><p>应用的根URL。举个例子，如果整个单页面应用的所有资源可以通过 /app/ 来访问，那么 base 配置项的值需要设置为 ‘/app/‘。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">默认值： <span class="string">'/'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		base: <span class="string">'/app/'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>base 被设置后，Nuxt.js 会自动将它添加至页面中：</p><base href>。该配置项的值会被直接传给 vue-router 的构造器。<p></p><h3 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h3><p>默认值：’history’，配置路由的模式，鉴于服务端渲染的特性，不建议修改该配置。该配置项的值会被直接传给 vue-router 的构造器。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		mode: <span class="string">'hash'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="linkActiveClass"><a href="#linkActiveClass" class="headerlink" title="linkActiveClass"></a>linkActiveClass</h3><p>默认值： ‘nuxt-link-active’，全局配置<nuxt-link>组件默认的激活类名。该配置项的值会被直接传给 vue-router 的构造器。</nuxt-link></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		linkActiveClass: <span class="string">'active-link'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="scrollBehavior"><a href="#scrollBehavior" class="headerlink" title="scrollBehavior"></a>scrollBehavior</h3><p>scrollBehavior 配置项用于个性化配置跳转至目标页面后的页面滚动位置。每次页面渲染后都会调用 scrollBehavior 配置的方法。该配置项的值会被直接传给 vue-router 的构造器。</p><p>scrollBehavior 的默认配置为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollBehavior = <span class="function">(<span class="params">to, <span class="keyword">from</span>, savedPosition</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="comment">// savedPosition 只有在 popstate 导航（如按浏览器的返回按钮）时可以获取。</span></span><br><span class="line">	<span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">		<span class="keyword">return</span> savedPosition</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">let</span> position = &#123;&#125;</span><br><span class="line">		<span class="comment">// 目标页面子组件少于两个</span></span><br><span class="line">		<span class="keyword">if</span> (to.matched.length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">			<span class="comment">// 滚动至页面顶部</span></span><br><span class="line">			position = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (to.matched.some(<span class="function">(<span class="params">r</span>) =&gt;</span> r.components.default.options.scrollToTop)) &#123;</span><br><span class="line">			<span class="comment">// 如果目标页面子组件中存在配置了scrollToTop为true</span></span><br><span class="line">			position = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 如果目标页面的url有锚点,  则滚动至锚点所在的位置</span></span><br><span class="line">		<span class="keyword">if</span> (to.hash) &#123;</span><br><span class="line">			position = &#123; <span class="attr">selector</span>: to.hash &#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> position</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>举个例子，我们可以配置所有页面渲染后滚动至顶部：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		scrollBehavior: <span class="function"><span class="keyword">function</span> (<span class="params">to, from, savedPosition</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="middleware-1"><a href="#middleware-1" class="headerlink" title="middleware"></a>middleware</h3><p>为应用的每个页面设置默认的中间件。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		<span class="comment">// 在每页渲染前运行 middleware/user-agent.js 中间件的逻辑</span></span><br><span class="line">		middleware: <span class="string">'user-agent'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">middleware/user-agent.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 给上下文对象增加 userAgent 属性（增加的属性可在 `asyncData` 和 `fetch` 方法中获取）</span></span><br><span class="line">	context.userAgent = context.isServer ? context.req.headers[<span class="string">'user-agent'</span>] : navigator.userAgent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>了解更多关于中间件的信息，请参考 中间件指引文档。</p><h3 id="extendRoutes"><a href="#extendRoutes" class="headerlink" title="extendRoutes"></a>extendRoutes</h3><p>你可以通过 extendRoutes 配置项来扩展 Nuxt.js 生成的路由配置。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolve = <span class="built_in">require</span>(<span class="string">'path'</span>).resolve</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	router: &#123;</span><br><span class="line">		extendRoutes (routes) &#123;</span><br><span class="line">			routes.push(&#123;</span><br><span class="line">				name: <span class="string">'custom'</span>,</span><br><span class="line">				path: <span class="string">'*'</span>,</span><br><span class="line">				component: resolve(__dirname, <span class="string">'pages/404.vue'</span>)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="srcDir"><a href="#srcDir" class="headerlink" title="srcDir"></a>srcDir</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">该配置项用于配置应用的源码目录路径。</span><br></pre></td></tr></table></figure><p>关于 srcDir 配置项的详细文档</p><h2 id="transition-1"><a href="#transition-1" class="headerlink" title="transition"></a>transition</h2><p>该配置项用于个性化配置应用过渡效果属性的默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">默认值：</span><br><span class="line">&#123;</span><br><span class="line">	name: <span class="string">'page'</span>,</span><br><span class="line">	mode: <span class="string">'out-in'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	transition: <span class="string">'page'</span></span><br><span class="line">	<span class="comment">// or</span></span><br><span class="line">	transition: &#123;</span><br><span class="line">		name: <span class="string">'page'</span>,</span><br><span class="line">		mode: <span class="string">'out-in'</span>,</span><br><span class="line">		beforeEnter (el) &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">'Before enter...'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>属性字段</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>“page”</td><td>所有路由过渡都会用到的过渡名称。</td></tr><tr><td>mode</td><td>String</td><td>“out-in”</td><td>所有路由都用到的过渡模式，见 Vue.js transition 使用文档。</td></tr><tr><td>css</td><td>Boolean</td><td>true</td><td>是否给页面组件根元素添加 CSS 过渡类名。如果值为 false，路由过渡时将触发页面组件事件注册的 Javascript 钩子方法。</td></tr><tr><td>type</td><td>String</td><td>n/a</td><td>指定过滤动效事件的类型，用于判断过渡结束的时间点。值可以是 “transition” 或 “animation”。 默认情况下, Nuxt.js 会自动侦测动效事件的类型。</td></tr><tr><td>enterClass</td><td>String</td><td>n/a</td><td>目标路由动效开始时的类名。 详情请参考 Vue.js transition 使用文档 。</td></tr><tr><td>enterToClass</td><td>String</td><td>n/a</td><td>目标路由动效结束时的类名。 详情请参考 Vue.js transition 使用文档 。</td></tr><tr><td>enterActiveClass</td><td>String</td><td>n/a</td><td>目标路由过渡过程中的类名。详情请参考 Vue.js transition 使用文档 。</td></tr><tr><td>leaveClass</td><td>String</td><td>n/a</td><td>当前路由动效开始时的类名。 详情请参考 Vue.js transition 使用文档 。</td></tr><tr><td>leaveToClass</td><td>String</td><td>n/a</td><td>当前路由动效结束时的类名。 详情请参考 Vue.js transition 使用文档 。</td></tr><tr><td>leaveActiveClass</td><td>String</td><td>n/a</td><td>当前路由动效过程中的类名。详情请参考 Vue.js transition 使用文档 。</td></tr></tbody></table><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><h2 id="SAAS"><a href="#SAAS" class="headerlink" title="SAAS"></a>SAAS</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev node-sass sass-loader</span><br></pre></td></tr></table></figure><h2 id="LESS"><a href="#LESS" class="headerlink" title="LESS"></a>LESS</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev less less-loader</span><br></pre></td></tr></table></figure><h2 id="Axios-API"><a href="#Axios-API" class="headerlink" title="Axios API"></a>Axios API</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## CROSS_ENV环境变量</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### nuxt2.0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">根据不同的环境变量切换接口网址名称</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> javascript</span><br><span class="line"><span class="keyword">if</span> (process.env.PATH_TYPE === <span class="string">'development'</span>) &#123;</span><br><span class="line">  baseUrl = <span class="string">`http://dev.yktour.com.cn:<span class="subst">$&#123;port&#125;</span>/development`</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.PATH_TYPE === <span class="string">'release'</span>) &#123;</span><br><span class="line">  baseUrl = <span class="string">`http://test.yktour.com.cn/release`</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.PATH_TYPE === <span class="string">'production'</span>) &#123;</span><br><span class="line">  baseUrl = <span class="string">`http://yktour.com.cn/api`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代理服务，代理不同的变量到不同的接口</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">modules: [</span><br><span class="line">  <span class="string">'@nuxtjs/proxy'</span></span><br><span class="line">],</span><br><span class="line">proxy: [</span><br><span class="line">  [</span><br><span class="line">    <span class="string">'/development'</span>,&#123;</span><br><span class="line">      target: <span class="string">'https://testapp.yktour.com.cn/ykly-app'</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">'^/development'</span> : <span class="string">''</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">'/release'</span>,&#123;</span><br><span class="line">      target: <span class="string">'https://testapp.yktour.com.cn/ykly-app'</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">'^/release'</span> : <span class="string">''</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  [</span><br><span class="line">    <span class="string">'/api'</span>,&#123;</span><br><span class="line">      target: <span class="string">'https://testapp.yktour.com.cn/ykly-app'</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123; <span class="string">'^/api'</span> : <span class="string">''</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>通过设置自定义PATH_TYPE环境变量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">env: &#123;</span><br><span class="line">  PATH_TYPE: process.env.PATH_TYPE || process.env.NODE_ENV</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>运行方式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"devTest"</span>: <span class="string">"cross-env PATH_TYPE=release nuxt"</span>,</span><br><span class="line"><span class="string">"buildTest"</span>: <span class="string">"cross-env PATH_TYPE=release nuxt build"</span>,</span><br><span class="line"><span class="string">"startTest"</span>: <span class="string">"cross-env PATH_TYPE=release nuxt start"</span>,</span><br></pre></td></tr></table></figure><h3 id="nuxt1-0"><a href="#nuxt1-0" class="headerlink" title="nuxt1.0"></a>nuxt1.0</h3><p>无法获取process.env.NODE_ENV的值</p><pre><code class="javascript"></code></pre><h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><img src="%22https://upload-images.jianshu.io/upload_images/5531211-d1a3e5b36ee03f08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/460/format/webp%22" alt></p><h2 id="Vux初始化时间不会变革"><a href="#Vux初始化时间不会变革" class="headerlink" title="Vux初始化时间不会变革"></a>Vux初始化时间不会变革</h2><h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><p><a href="https://nuxtjs.org/examples" target="_blank" rel="noopener">Nuxt 案例</a><br><a href></a><br><a href></a><br><a href></a><br><a href="https://github.com/OrangeXC/n2ex" title="vue ssr v2ex" target="_blank" rel="noopener">V2ex clone built with Nuxt.js</a><br><a href="https://github.com/ITCNZ/mynuxt" title="vue+nuxt+sass+node+express+MongoDB 实现的文章发布系统" target="_blank" rel="noopener">文章发布系统</a><br><a href="https://github.com/onefriendaday/nuxtjs-multilanguage-website" target="_blank" rel="noopener">A Nuxtjs Website using Storyblok</a><br><a href="https://github.com/MontageD/nuxt-maopingshou" title="Node.js(6.9.1) + vue(2.0) + vuex + (NUXT)SSR + nginx反向代理" target="_blank" rel="noopener">vuejs, nuxtjs 搭建 新闻聚合网站</a></p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Nuxt/" rel="tag"># Nuxt</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/03/27/MobileDBUG/" rel="next" title="移动端调试"><i class="fa fa-chevron-left"></i> 移动端调试</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/08/25/VueSRR/" rel="prev" title="Vue SSR">Vue SSR <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Luuman</p><div class="site-description motion-element" itemprop="description">luuman，90后，水瓶座普通男青年！爱折腾，爱运动，更爱游离于错综复杂的编码与逻辑中，无法自拔。相信编程是一门艺术，自诩为游弋在代码里的人生。</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">84</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">18</span> <span class="site-state-item-name">categories</span></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">35</span> <span class="site-state-item-name">tags</span></div></nav></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#传统打包"><span class="nav-number">1.</span> <span class="nav-text">传统打包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装流程"><span class="nav-number">2.</span> <span class="nav-text">安装流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#新手模板"><span class="nav-number">2.1.</span> <span class="nav-text">新手模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模板结构"><span class="nav-number">2.2.</span> <span class="nav-text">模板结构</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#工作原理"><span class="nav-number">3.</span> <span class="nav-text">工作原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用方法"><span class="nav-number">4.</span> <span class="nav-text">使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#绝对路径"><span class="nav-number">4.1.</span> <span class="nav-text">绝对路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由"><span class="nav-number">4.2.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#动态路由"><span class="nav-number">4.2.1.</span> <span class="nav-text">动态路由</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#错误页面"><span class="nav-number">4.3.</span> <span class="nav-text">错误页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引入静态资源"><span class="nav-number">4.4.</span> <span class="nav-text">引入静态资源</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#页面方法"><span class="nav-number">5.</span> <span class="nav-text">页面方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#asyncData-异步获取数据"><span class="nav-number">5.1.</span> <span class="nav-text">asyncData 异步获取数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#返回-Promise"><span class="nav-number">5.1.1.</span> <span class="nav-text">返回 Promise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用-async或await"><span class="nav-number">5.1.2.</span> <span class="nav-text">使用 async或await</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误处理"><span class="nav-number">5.1.3.</span> <span class="nav-text">错误处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fetch"><span class="nav-number">5.2.</span> <span class="nav-text">fetch</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#head"><span class="nav-number">5.3.</span> <span class="nav-text">head</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#layout"><span class="nav-number">5.4.</span> <span class="nav-text">layout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#middleware"><span class="nav-number">5.5.</span> <span class="nav-text">middleware</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scrollToTop"><span class="nav-number">5.6.</span> <span class="nav-text">scrollToTop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#transition"><span class="nav-number">5.7.</span> <span class="nav-text">transition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#validate"><span class="nav-number">5.8.</span> <span class="nav-text">validate</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#配置文件"><span class="nav-number">6.</span> <span class="nav-text">配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#build"><span class="nav-number">6.1.</span> <span class="nav-text">build</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#analyze"><span class="nav-number">6.1.1.</span> <span class="nav-text">analyze</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#babel"><span class="nav-number">6.1.2.</span> <span class="nav-text">babel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#extend"><span class="nav-number">6.1.3.</span> <span class="nav-text">extend</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#filenames-自定义打包文件名"><span class="nav-number">6.1.4.</span> <span class="nav-text">filenames 自定义打包文件名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loaders-加载器"><span class="nav-number">6.1.5.</span> <span class="nav-text">loaders 加载器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#plugins-插件"><span class="nav-number">6.1.6.</span> <span class="nav-text">plugins 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#postcss"><span class="nav-number">6.1.7.</span> <span class="nav-text">postcss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#publicPath-CDN地址"><span class="nav-number">6.1.8.</span> <span class="nav-text">publicPath CDN地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vendor-第三方模块"><span class="nav-number">6.1.9.</span> <span class="nav-text">vendor 第三方模块</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cache-组件缓存"><span class="nav-number">6.2.</span> <span class="nav-text">cache 组件缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#css"><span class="nav-number">6.3.</span> <span class="nav-text">css</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dev"><span class="nav-number">6.4.</span> <span class="nav-text">dev</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#env"><span class="nav-number">6.5.</span> <span class="nav-text">env</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#generate"><span class="nav-number">6.6.</span> <span class="nav-text">generate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#loading"><span class="nav-number">6.7.</span> <span class="nav-text">loading</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#禁用加载进度条"><span class="nav-number">6.7.1.</span> <span class="nav-text">禁用加载进度条</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#个性化加载进度条"><span class="nav-number">6.7.2.</span> <span class="nav-text">个性化加载进度条</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义加载组件"><span class="nav-number">6.7.3.</span> <span class="nav-text">自定义加载组件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#plugins"><span class="nav-number">6.8.</span> <span class="nav-text">plugins</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rootDir"><span class="nav-number">6.9.</span> <span class="nav-text">rootDir</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#router"><span class="nav-number">6.10.</span> <span class="nav-text">router</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#base"><span class="nav-number">6.10.1.</span> <span class="nav-text">base</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mode"><span class="nav-number">6.10.2.</span> <span class="nav-text">mode</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linkActiveClass"><span class="nav-number">6.10.3.</span> <span class="nav-text">linkActiveClass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#scrollBehavior"><span class="nav-number">6.10.4.</span> <span class="nav-text">scrollBehavior</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#middleware-1"><span class="nav-number">6.10.5.</span> <span class="nav-text">middleware</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#extendRoutes"><span class="nav-number">6.10.6.</span> <span class="nav-text">extendRoutes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#srcDir"><span class="nav-number">6.11.</span> <span class="nav-text">srcDir</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#transition-1"><span class="nav-number">6.12.</span> <span class="nav-text">transition</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装插件"><span class="nav-number">7.</span> <span class="nav-text">安装插件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SAAS"><span class="nav-number">7.1.</span> <span class="nav-text">SAAS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LESS"><span class="nav-number">7.2.</span> <span class="nav-text">LESS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Axios-API"><span class="nav-number">7.3.</span> <span class="nav-text">Axios API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nuxt1-0"><span class="nav-number">7.3.1.</span> <span class="nav-text">nuxt1.0</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见问题"><span class="nav-number">8.</span> <span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#生命周期"><span class="nav-number">8.1.</span> <span class="nav-text">生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vux初始化时间不会变革"><span class="nav-number">8.2.</span> <span class="nav-text">Vux初始化时间不会变革</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#案例"><span class="nav-number">9.</span> <span class="nav-text">案例</span></a></li></ol></div></div></div><div class="ads"><a class="adsense" href="https://www.baidu.com/" title="广告位" target="_blank"><img src="https://image.yktour.com.cn/g1/M00/07/80/CgAMDF1aOQmABXszAADZNTNgD7c637.jpg" class="image" alt="广告位"> </a><a class="adsense" href="https://www.baidu.com/" title="广告位" target="_blank"><img src="https://image.yktour.com.cn/g1/M00/07/80/CgAMDF1aOQmABXszAADZNTNgD7c637.jpg" class="image" alt="广告位"> </a><a class="adsense" href="https://www.baidu.com/" title="广告位" target="_blank"><img src="https://image.yktour.com.cn/g1/M00/07/80/CgAMDF1aOQmABXszAADZNTNgD7c637.jpg" class="image" alt="广告位"></a></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Luuman</span></div><div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">Nice.Gemini</a> v7.3.0</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.3.0"></script><script src="/js/motion.js?v=7.3.0"></script><script src="/js/affix.js?v=7.3.0"></script><script src="/js/schemes/pisces.js?v=7.3.0"></script><script src="/js/next-boot.js?v=7.3.0"></script><div class="local-search-pop-overlay"></div><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input" autocapitalize="none" autocorrect="off"></div></div><div id="local-search-result"><ul class="search-result-list"></ul></div></div></div><script src="/js/json-search.js?v=7.3.0"></script><script src="/js/scrollspy.js?v=7.3.0"></script><script src="/js/post-details.js?v=7.3.0"></script></body></html><!-- rebuild by neat -->